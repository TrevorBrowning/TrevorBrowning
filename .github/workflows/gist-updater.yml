name: Update README with Gist Content

on:
  schedule:
    # Runs every hour
    - cron: '0 * * * *'
  workflow_dispatch:

jobs:
  update-readme:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      # Step 1: Get the content of the Gist
      - name: Get Gist Content
        id: get_gist # Give this step an ID so we can reference its output
        uses: dawidd6/action-get-gist@v1.1
        with:
          # Your GitHub Personal Access Token
          token: ${{ secrets.GIST_PAT }}
          # The ID of your Gist
          gist_id: 1ad666e6792dc86bb852cfc2fc8aca73 # <-- Make sure to replace this again!
      
      # Step 2: Update the README.md file with the Gist content
      - name: Update README
        uses: anmol098/waka-readme-stats@master
        with:
          # This action can be used to update any file, not just for WakaTime
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          # The ID of the Gist whose content we want to inject
          GIST_ID: YOUR_GIST_ID_HERE # <-- And replace this one too!
          # Markers in your README file
          START_COMMENT: 'GIST_STATS:START'
          END_COMMENT: 'GIST_STATS:END'

